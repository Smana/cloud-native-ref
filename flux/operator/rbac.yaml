# Flux UI RBAC - Maps Zitadel roles to Kubernetes permissions
# Users are impersonated based on their Zitadel groups

---
# Admin access - full Flux resource management
# Members of the 'flux-admins' Zitadel role get cluster-admin access
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: flux-ui-admins
subjects:
  - kind: Group
    name: flux-admins
    apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: cluster-admin
  apiGroup: rbac.authorization.k8s.io

---
# Read-only access for viewers
# Members of the 'flux-viewers' Zitadel role get view-only access
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: flux-ui-viewers
subjects:
  - kind: Group
    name: flux-viewers
    apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: ClusterRole
  name: view
  apiGroup: rbac.authorization.k8s.io
