apiVersion: cloud.ogenki.io/v1alpha1
kind: SQLInstance
metadata:
  name: xplane-zitadel
  namespace: tooling
spec:
  databases:
    - owner: "zitadel"
      name: "zitadel"
    - owner: "zitadel"
      name: "audit"
  size: "small"
  storageGB: 20
  cnpg:
    instances: 1
    initSQL: |
      CREATE EXTENSION pg_stat_statements;
      CREATE EXTENSION pg_trgm;
      CREATE EXTENSION pgcrypto;
    backup:
      schedule: "0 0 * * *"
      bucketName: "eu-west-3-ogenki-cnpg-backups"
  compositionRef:
    name: xsqlinstances.cloud.ogenki.io
